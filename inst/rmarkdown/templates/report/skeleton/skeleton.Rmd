---
title: "`r title`"
author: "`r authors`"
output: 
  word_document:
    toc: no
    reference_docx: template.docx
documentclass: report
--- 

```{r, echo = F, results = 'hide'}
date <- format(Sys.Date(), format="%B %d, %Y")
```


:::{custom-style="Title Date"}
`r date`
:::

:::{custom-style="Data Citation"}
Species Inventory Management System Data Citation:
:::

:::{custom-style="Title Line"}
Project ID `r project_id`, Survey ID `r survey_id`
:::

\newpage

```{=latex}
\setcounter{tocdepth}{4}
\tableofcontents
```

\newpage

# Introduction

## Background

`r background_text`

## Objectives

`r objectives`

# Methods

## Study Area

`r study_area_description`

```{r, fig.width=10, fig.height=10, echo=FALSE, message=FALSE}
bc_bounds <- bc_bound(ask = FALSE)
nr_raw <- nr_regions(ask = FALSE)
nr <- nr_raw |> 
  st_set_crs(st_crs(bc_bounds)) |> 
  st_intersection(bc_bounds)

study_area_proj <- study_area_geometry |> 
  st_transform(crs=st_crs(nr))

nr_int <- nr |> 
  filter(st_intersects(geometry, study_area_proj, sparse = F))

# Set colours
colors <- RColorBrewer::brewer.pal(9, "Set3")
custom_gray <- "#DCDCDC"
dark_gray <- "#bfbfbf"

basemap <- ggplot() +
  geom_sf(data = nr,
          fill = custom_gray, col = dark_gray) +
  geom_sf(data = nr_int,
          aes(fill = REGION_NAME, col = REGION_NAME), alpha = 0.5) +
  geom_sf_text(data = nr_int, aes(label = gsub(' Natural Resource Region', '', REGION_NAME)), alpha = 0.75) +
  scale_fill_manual(values = colors) +
  scale_color_manual(values = colors) +
  theme_void() +
  theme(legend.position = 'none')

basemap + 
  geom_sf(data = study_area_proj,
          col = 'red', fill = 'red', alpha = 0.6, linewidth=5)
```

```{r, eval = T}
sa_bbox <- study_area_proj |> st_bbox()

study_area <- basemap +
  geom_sf(data = study_area_proj,
          col = 'red', fill = 'red', alpha = 0.6, linewidth=0.5) +
  coord_sf(xlim = c(sa_bbox[1], sa_bbox[3]),
           ylim =  c(sa_bbox[2], sa_bbox[4]))

study_area
```


## Survey Design

## Analysis

# Results

# Discussion

# Conclusion
